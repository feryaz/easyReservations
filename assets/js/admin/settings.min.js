(function(b,a){b(".colorpick").iris({change:function(c,d){b(this).parent().find(".colorpickpreview").css({backgroundColor:d.color.toString()})},hide:true,border:true}).on("click focus",function(c){c.stopPropagation();b(".iris-picker").hide();b(this).closest("td").find(".iris-picker").show();b(this).data("original-value",b(this).val())}).on("change",function(){if(b(this).is(".iris-error")){if(b(this).data("original-value").match(/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/)){b(this).val(b(this).data("original-value")).trigger("change")}else{b(this).val("").trigger("change")}}});b("body").on("click",function(){b(".iris-picker").hide()}).on("click",".easyreservations-upl",function(f){f.preventDefault();const g=b(this).hasClass("image"),c=b(this),d=a.media({library:{type:g?"image":""},multiple:false}).on("select",function(){const e=d.state().get("selection").first().toJSON();c.removeClass("button").css("display","inline-block").trigger("blur").next().show().next().val(e.id);if(g){c.html('<img src="'+e.url+'">')}else{c.children().val(e.filename)}}).open()}).on("click",".easyreservations-rmv",function(d){d.preventDefault();const c=b(this),f=b(this).hasClass("image");c.next().val("");if(f){c.hide().prev().addClass("button").css("display","inline-block").html("Upload image")}else{c.hide().prev().children().val("")}});b("table.er_gateways tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,helper:function(c,d){d.children().each(function(){b(this).width(b(this).width())});d.css("left","0");return d},start:function(c,d){d.item.css("background-color","#f6f6f6")},stop:function(c,d){d.item.removeAttr("style");d.item.trigger("updateMoveButtons")}});b("code[data-tag]").on("click",function(){const d=b("#"+b(this).data("target"));const e=d[0].selectionStart;const c=d.val();const f="["+b(this).data("tag")+"]";d.val(c.substring(0,e)+f+c.substring(e))})}(jQuery,wp));