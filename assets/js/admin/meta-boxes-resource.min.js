jQuery(function(c){c("#catalog-visibility").find(".edit-catalog-visibility").on("click",function(){if(c("#catalog-visibility-select").is(":hidden")){c("#catalog-visibility-select").slideDown("fast").css("display","block")}return false});c("#catalog-visibility").find(".save-post-visibility").on("click",function(){c("#catalog-visibility-select").slideUp("fast");let label=c("input[name=_visibility]:checked").attr("data-label");if(c("input[name=_featured]").is(":checked")){label=label+", "+easyreservations_admin_meta_boxes.featured_label;c("input[name=_featured]").attr("checked","checked");c("#resource_featured").val("yes")}else{c("#resource_featured").val("no")}if(c("input[name=_onsale]").is(":checked")){label=label+", "+easyreservations_admin_meta_boxes.onsale_label;c("input[name=_onsale]").attr("checked","checked");c("#resource_onsale").val("yes")}else{c("#resource_onsale").val("no")}c("#resource_visibility").val(c("input[name=_visibility]:checked").val());c(".edit-catalog-visibility").text(label);return false});c("#catalog-visibility").find(".cancel-post-visibility").on("click",function(){c("#catalog-visibility-select").slideUp("fast");c("#catalog-visibility").find(".edit-catalog-visibility").show();c("input[name=_visibility]").removeAttr("checked");c("input[name=_visibility][value="+c("#current_visibility").val()+"]").attr("checked","checked");if("yes"===c("#current_featured").val()){c("input[name=_featured]").attr("checked","checked")}else{c("input[name=_featured]").removeAttr("checked")}if("yes"===c("#current_onsale").val()){c("input[name=_onsale]").attr("checked","checked")}else{c("input[name=_onsale]").removeAttr("checked")}return false});let resourceGalleryFrame;const a=c("#resource_image_gallery");const b=c("#resource_images_container").find("ul.resource_images");c(".add_resource_images").on("click","a",function(e){e.preventDefault();if(resourceGalleryFrame){resourceGalleryFrame.open();return}const d=c(this);resourceGalleryFrame=wp.media.frames.resource_gallery=wp.media({title:d.data("choose"),button:{text:d.data("update")},states:[new wp.media.controller.Library({title:d.data("choose"),filterable:"all",multiple:true})]});resourceGalleryFrame.on("select",function(){const f=resourceGalleryFrame.state().get("selection");let attachmentIds=a.val();f.map(function(g){g=g.toJSON();if(g.id){attachmentIds=attachmentIds?attachmentIds+","+g.id:g.id;b.append('<li class="image" data-attachment_id="'+g.id+'"><img src="'+(g.sizes&&g.sizes.thumbnail?g.sizes.thumbnail.url:g.url)+'" /><ul class="actions"><li><a href="#" class="delete" title="'+d.data("delete")+'">'+d.data("text")+"</a></li></ul></li>")}return true});a.val(attachmentIds)});resourceGalleryFrame.open()});b.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:true,forceHelperSize:false,helper:"clone",opacity:0.65,placeholder:"er-metabox-sortable-placeholder",start:function(d,e){e.item.css("background-color","#f6f6f6")},stop:function(d,e){e.item.removeAttr("style")},update:function(){let attachmentIds="";c("#resource_images_container").find("ul li.image").css("cursor","default").each(function(){attachmentIds=attachmentIds+c(this).attr("data-attachment_id")+","});a.val(attachmentIds)}});c("#resource_images_container").on("click","a.delete",function(){c(this).closest("li.image").remove();let attachmentIds="";c("#resource_images_container").find("ul li.image").css("cursor","default").each(function(){attachmentIds=attachmentIds+c(this).attr("data-attachment_id")+","});a.val(attachmentIds);c("#tiptip_holder").removeAttr("style");c("#tiptip_arrow").removeAttr("style");return false});c(document).ready(function(){const d=setInterval(function(){if(c(".edit-post-post-visibility").length>0){c("#catalog-visibility").children().insertAfter(c(".edit-post-post-visibility"));clearInterval(d)}},500)});if(wp.data.dispatch("core/edit-post")){wp.data.dispatch("core/edit-post").removeEditorPanel("discussion-panel")}});