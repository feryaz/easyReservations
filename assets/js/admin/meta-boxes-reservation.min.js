jQuery(function(b){var a={init:function(){jQuery("li#toplevel_page_reservations, li#toplevel_page_reservations > a").addClass("wp-has-current-submenu wp-menu-open").removeClass("wp-not-current-submenu");b("#resource").on("change",this.change_resource);b("a.remove-from-order").on("click",this.remove_from_order);b("a.add-to-order").on("click",this.add_to_order);b(document.body).on("er_backbone_modal_loaded",this.backbone.init).on("er_backbone_modal_response",this.backbone.response);a.change_resource()},change_resource:function(f){b(".resource-space, .er-reservation-space").css("display","none");b(".resource-space select").prop("disabled",true);const d=b("#resource"),g=d.val(),c=b(".resource-space.resource-"+g);if(c.length>0){c.css("display","block");if(d.is(":enabled")){c.find("select").prop("disabled",false);c.find("select").attr("name","space")}if(g>0){b(".er-reservation-space").css("display","block")}if(f){c.find("select").val(1)}}},add_to_order:function(c){c.preventDefault();b(this).ERBackboneModal({template:"er-modal-add-to-order"})},remove_from_order:function(c){c.preventDefault();if(window.confirm(easyreservations_admin_meta_boxes.i18n_delete_tax)){b("#easyreservations-reservation-order").block();b.ajax({url:easyreservations_admin_meta_boxes.ajax_url,data:{reservation_id:b("#object_id").val(),order_id:b(this).attr("data-order_id"),action:"easyreservations_remove_reservation_from_order",security:easyreservations_admin_meta_boxes.receipt_item_nonce},type:"POST",success:function(d){if(d.success){b("#easyreservations-reservation-order").find(".inside").empty();b("#easyreservations-reservation-order").find(".inside").append(d.data.html)}else{window.alert(d.data.error)}b("#easyreservations-reservation-order").unblock()},complete:function(){}})}return false},backbone:{init:function(d,c){if("er-modal-add-to-order"===c){b(document.body).trigger("er-enhanced-select-init")}},response:function(f,d,c){if("er-modal-add-to-order"===d){if(c.order_id){b("#easyreservations-reservation-order").block();b.ajax({url:easyreservations_admin_meta_boxes.ajax_url,data:{reservation_id:b("#object_id").val(),order_id:c.order_id,reservation:1,action:"easyreservations_add_reservation_to_order",security:easyreservations_admin_meta_boxes.receipt_item_nonce},type:"POST",success:function(e){if(e.success){b("#easyreservations-reservation-order").find(".inside").empty();b("#easyreservations-reservation-order").find(".inside").append(e.data.html)}else{window.alert(e.data.error)}b("#easyreservations-reservation-order").unblock()},complete:function(){}})}}}}};a.init()});