jQuery(function(e){if(typeof er_cart_fragments_params==="undefined"){return false}var f=true,m=er_cart_fragments_params.cart_hash_key;try{f=("sessionStorage" in window&&window.sessionStorage!==null);window.sessionStorage.setItem("er","test");window.sessionStorage.removeItem("er");window.localStorage.setItem("er","test");window.localStorage.removeItem("er")}catch(c){f=false}function n(){if(f){sessionStorage.setItem("er_cart_created",(new Date()).getTime())}}function o(p){if(f){localStorage.setItem(m,p);sessionStorage.setItem(m,p)}}var i={url:er_cart_fragments_params.er_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),type:"POST",data:{time:new Date().getTime()},timeout:er_cart_fragments_params.request_timeout,success:function(p){if(p&&p.fragments){e.each(p.fragments,function(q,r){e(q).replaceWith(r)});if(f){sessionStorage.setItem(er_cart_fragments_params.fragment_name,JSON.stringify(p.fragments));o(p.cart_hash);if(p.cart_hash){n()}}e(document.body).trigger("er_fragments_refreshed")}},error:function(){e(document.body).trigger("er_fragments_ajax_error")}};function g(){e.ajax(i)}if(f){let cartTimeout=null;e(document.body).on("er_fragment_refresh updated_er_div",function(){g()});e(document.body).on("added_to_cart removed_from_cart",function(r,p,q){const s=sessionStorage.getItem(m);if(s===null||s===undefined||s===""){n()}sessionStorage.setItem(er_cart_fragments_params.fragment_name,JSON.stringify(p));o(q)});e(document.body).on("er_fragments_refreshed",function(){clearTimeout(cartTimeout);cartTimeout=setTimeout(g,24*60*60*1000)});e(window).on("storage onstorage",function(p){if(m===p.originalEvent.key&&localStorage.getItem(m)!==sessionStorage.getItem(m)){g()}});e(window).on("pageshow",function(p){if(p.originalEvent.persisted){e(".widget_shopping_cart_content").empty();e(document.body).trigger("er_fragment_refresh")}});try{var b=e.parseJSON(sessionStorage.getItem(er_cart_fragments_params.fragment_name)),a=sessionStorage.getItem(m),k=Cookies.get("woocommerce_cart_hash"),h=sessionStorage.getItem("er_cart_created");if(a===null||a===undefined||a===""){a=""}if(k===null||k===undefined||k===""){k=""}if(a&&(h===null||h===undefined||h==="")){throw"No cart_created"}if(h){var j=((1*h)+day_in_ms),l=(new Date()).getTime();if(j<l){throw"Fragment expired"}cartTimeout=setTimeout(g,(j-l))}if(b&&b["div.widget_shopping_cart_content"]&&a===k){e.each(b,function(p,q){e(p).replaceWith(q)});e(document.body).trigger("er_fragments_loaded")}else{throw"No fragment"}}catch(c){g()}}else{g()}if(Cookies.get("woocommerce_items_in_cart")>0){e(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").show()}else{e(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").hide()}e(document.body).on("adding_to_cart",function(){e(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").show()});var d=("undefined"!==typeof wp&&wp.customize&&wp.customize.selectiveRefresh&&wp.customize.widgetsPreview&&wp.customize.widgetsPreview.WidgetPartial);if(d){wp.customize.selectiveRefresh.bind("partial-content-rendered",function(){g()})}});