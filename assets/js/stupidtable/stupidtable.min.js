(function(a){a.fn.stupidtable=function(b){return this.each(function(){var c=a(this);b=b||{};b=a.extend({},a.fn.stupidtable.default_sort_fns,b);c.on("click.stupidtable","thead th",function(){var h=a(this);var g=0;var e=a.fn.stupidtable.dir;h.parents("tr").find("th").slice(0,h.index()+1).each(function(){var i=a(this).attr("colspan")||1;g+=parseInt(i,10)});g=g-1;var d=h.data("sort-default")||e.ASC;if(h.data("sort-dir")){d=h.data("sort-dir")===e.ASC?e.DESC:e.ASC}var f=h.data("sort")||null;if(f===null){return}c.trigger("beforetablesort",{column:h.index(),direction:d});c.css("display");setTimeout(function(){var i=b[f];c.children("tbody").each(function(m,l){var n=[];var k=a(l);var j=k.children("tr").not("[data-sort-ignore]");j.each(function(p,r){var o=a(r).children().eq(g);var q=o.data("sort-value");var s=typeof(q)!=="undefined"?q:o.text();n.push([s,r])});n.sort(function(p,o){return i(p[0],o[0])});if(d!=e.ASC){n.reverse()}j=a.map(n,function(o){return o[1]});k.append(j)});c.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc");h.data("sort-dir",d).addClass("sorting-"+d);c.trigger("aftertablesort",{column:h.index(),direction:d});c.css("display")},10)})})};a.fn.stupidtable.dir={ASC:"asc",DESC:"desc"};a.fn.stupidtable.default_sort_fns={"int":function(d,c){return parseInt(d,10)-parseInt(c,10)},"float":function(d,c){return parseFloat(d)-parseFloat(c)},string:function(d,c){return d.localeCompare(c)},"string-ins":function(d,c){d=d.toLocaleLowerCase();c=c.toLocaleLowerCase();return d.localeCompare(c)}}})(jQuery);